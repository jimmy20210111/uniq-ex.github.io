(this["webpackJsonpuniq-ex"]=this["webpackJsonpuniq-ex"]||[]).push([[0],{340:function(e,t,n){},343:function(e,t,n){},425:function(e,t){},426:function(e,t){},445:function(e,t){},447:function(e,t){},457:function(e,t){},459:function(e,t){},500:function(e,t){},502:function(e,t){},509:function(e,t){},510:function(e,t){},540:function(e,t){},559:function(e,t){},566:function(e,t,n){var a={"./aes":253,"./aes.js":253,"./big":254,"./big.js":254,"./ctx":155,"./ctx.js":155,"./ecdh":255,"./ecdh.js":255,"./ecp":256,"./ecp.js":256,"./ecp2":257,"./ecp2.js":257,"./ff":258,"./ff.js":258,"./fp":259,"./fp.js":259,"./fp12":260,"./fp12.js":260,"./fp2":261,"./fp2.js":261,"./fp4":262,"./fp4.js":262,"./gcm":263,"./gcm.js":263,"./hash256":264,"./hash256.js":264,"./hash384":265,"./hash384.js":265,"./hash512":266,"./hash512.js":266,"./mpin":267,"./mpin.js":267,"./newhope":268,"./newhope.js":268,"./nhs":269,"./nhs.js":269,"./pair":270,"./pair.js":270,"./rand":271,"./rand.js":271,"./rom_curve":272,"./rom_curve.js":272,"./rom_field":273,"./rom_field.js":273,"./rsa":274,"./rsa.js":274,"./sha3":275,"./sha3.js":275,"./uint64":276,"./uint64.js":276};function c(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=i,e.exports=c,c.id=566},578:function(e,t,n){},595:function(e,t,n){},596:function(e,t,n){},597:function(e,t,n){},599:function(e,t,n){},600:function(e,t,n){},601:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(1),i=n(0),s=n(29),r=n.n(s),o=n(25),l=n.n(o),u=n(49),d=n(14),j=n(73),b=n(16),m=n(48),p=n(17),f=n(11),O="TEST",h="50303ba5b6c96e80fa81de357d1f2a32abfe9f0e",v="c5b4a2b060c4255b8eee1f5ab05e2e35a3f1ce55",x=["/","/staking","/token"],k=function(e,t){var n=new RegExp("(^|&|[/?]+)".concat(t,"=([^&]*)(&|$)"),"i"),a=e.substr(1).match(n);return null!=a?a[2]:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e.substr(0,6),"...").concat(e.substr(-4))},N=(n(340),function(e){var t=Object(p.c)((function(e){return{account:e.wallet.account}})).account,n=Object(i.useState)(!1),a=Object(f.a)(n,2),s=a[0],r=a[1],o=function(e){r(e)};return Object(c.jsxs)("div",{className:"header-wrapper",children:[s?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){return o(!1)}}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex is a pure github based DAO dex, all activities are logged on github."}),Object(c.jsxs)("p",{className:"intro-line",children:["You can open issues for discussion ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/uniq-ex/uniq-ex/issues",children:"here"})]}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex's future business will not be limited to exchanges though, we may enter various DeFi markets like compound or hegic."}),Object(c.jsxs)("p",{className:"intro-line",children:["You can buy UNX(the governance token of uniq-ex) ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://uniq-ex.github.io/#/?asset=8&price=14",children:"here"})]})]})}):null,Object(c.jsx)("div",{className:"header",children:Object(c.jsxs)("div",{className:"content-wrapper",children:[Object(c.jsxs)("div",{className:"logo-wrapper",children:["UNIQ-EX",Object(c.jsx)("div",{className:"site-intro",onClick:function(){return o(!0)}})]}),Object(c.jsxs)("div",{className:"nav-list",children:[x.indexOf("/")>=0?Object(c.jsx)("div",{className:"nav-item",children:Object(c.jsx)(j.b,{to:"/",children:"Trade"})}):null,x.indexOf("/staking")>=0?Object(c.jsx)("div",{className:"nav-item",children:Object(c.jsx)(j.b,{to:"/staking",children:"Staking"})}):null,x.indexOf("/token")>=0?Object(c.jsx)("div",{className:"nav-item",children:Object(c.jsx)(j.b,{to:"/token",children:"Token"})}):null]}),Object(c.jsxs)("div",{className:"".concat(t?"active":""," profile-wrapper"),children:[t&&Object(c.jsx)("span",{className:"account-address",children:g(t)}),t&&Object(c.jsx)("span",{className:"signout-btn",onClick:function(){"function"===typeof e.onSignOut&&e.onSignOut()},children:"Sign Out"}),!t&&Object(c.jsx)("span",{className:"connect-btn",onClick:function(){"function"===typeof e.onConnectWallet&&e.onConnectWallet()},children:"Connect Wallet"})]})]})})]})}),S=(n(343),function(e){return Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){return e.onCloseModal()}}),Object(c.jsx)("div",{className:"modal-icon-".concat(e.type," modal-icon")}),Object(c.jsx)("div",{className:"modal-text-".concat(e.type," modal-text"),children:e.text}),Object(c.jsx)("div",{className:"modal-extra-text",children:e.extraLink?Object(c.jsx)("a",{className:"transaction-link",target:"_blank",rel:"noreferrer",href:e.extraLink,children:e.extraText}):e.extraText})]})})}),w=function(e){var t=Object(p.c)((function(e){return{infoModal:e.modal.infoModal}})).infoModal,n=Object(p.b)(),s=Object(i.useCallback)((function(e,t){return n({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]);return Object(c.jsx)("div",{className:"modal-container",children:function(){var e=[];return t.show&&e.push(Object(c.jsx)(S,Object(a.a)(Object(a.a)({},t),{},{onCloseModal:function(){s("infoModal",Object.assign({},t,{show:!1}))}}))),e}()})},T=n(285),_=n(42),y=n(6),C=n(284),E=n(20),R=n.n(E),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};try{var n=JSON.parse(e);"wasm contract does not exist"===n.Result&&t("CONTRACT_ADDRESS_ERROR")}catch(a){}},A=_.utils.StringReader,L=_.utils.hexstr2str,D=_.utils.reverseHex,U=Math.pow(10,6),P=(n(578),_.utils.StringReader),M=_.utils.reverseHex,W=_.Crypto.Address,K=function(){var e=Object(i.useState)(),t=Object(f.a)(e,2),n=t[0],s=t[1],r=Object(i.useState)({}),o=Object(f.a)(r,2),j=o[0],b=o[1],O=Object(i.useState)({}),v=Object(f.a)(O,2),x=v[0],g=v[1],N=Object(i.useState)(0),S=Object(f.a)(N,2),w=S[0],E=S[1],K=Object(i.useState)([]),V=Object(f.a)(K,2),H=V[0],G=V[1],F=Object(i.useState)([]),q=Object(f.a)(F,2),B=q[0],J=q[1],X=Object(i.useState)("all"),Y=Object(f.a)(X,2),Q=Y[0],$=Y[1],z=Object(i.useState)(""),Z=Object(f.a)(z,2),ee=Z[0],te=Z[1],ne=Object(i.useState)(""),ae=Object(f.a)(ne,2),ce=ae[0],ie=ae[1],se=Object(i.useState)(0),re=Object(f.a)(se,2),oe=re[0],le=re[1],ue=Object(i.useState)([]),de=Object(f.a)(ue,2),je=de[0],be=de[1],me=Object(i.useState)(0),pe=Object(f.a)(me,2),fe=pe[0],Oe=pe[1],he=Object(i.useState)(0),ve=Object(f.a)(he,2),xe=ve[0],ke=ve[1],ge=Object(p.c)((function(e){return{account:e.wallet.account,stopInterval:e.common.stopInterval,loadingToken:e.common.loadingToken,tokens:e.common.tokens}})),Ne=ge.account,Se=ge.stopInterval,we=ge.loadingToken,Te=ge.tokens,_e=Object(p.b)(),ye=Object(i.useCallback)((function(e,t){return _e({type:"",modalType:e,modalDetail:t})}),[]),Ce=Object(i.useCallback)((function(e){return _e({type:"SET_STOP_INTERVAL",stopInterval:e})}),[]),Ee=Object(m.c)(),Re=parseInt(k(window.location.hash,"asset")||1),Ie=parseInt(k(window.location.hash,"price")||2);!function(){var e=Object(p.c)((function(e){return{stopInterval:e.common.stopInterval,tokens:e.common.tokens}})),t=e.stopInterval,n=e.tokens,a=Object(p.b)(),c=Object(i.useCallback)((function(e){return a({type:"SET_LOADING_TOKEN",loadingToken:e})}),[]),s=Object(i.useCallback)((function(e){return a({type:"SET_TOKENS",tokens:e})}),[]),r=Object(i.useCallback)((function(e){return a({type:"SET_STOP_INTERVAL",stopInterval:e})}),[]);function o(){if(!n.length)try{d.client.api.smartContract.invokeWasmRead({scriptHash:h,operation:"get_all_tokens",args:[]}).then((function(e){c(!1);for(var t=[],n=new A(e),a=n.readNextLen(),i=0;i<a;i++){var r={},o=n.readNextLen();r.name=L(n.read(o)),r.address=D(n.read(20)),r.ty=n.readUint8(),r.decimals=n.readUint128(),r.id=n.readUint128(),t.push(r)}for(var l={},u=0;u<t.length;u++)l[t[u].name]=t[u];var d=Object.values(l).map((function(e){return{id:e.id,decimals:e.decimals,address:e.address,name:e.name,value:e.id,label:e.name}}));s(d)})).catch((function(e){console.log(e),I(e,(function(t){console.log(t),"CONTRACT_ADDRESS_ERROR"===t?r(!0):console.log("get all tokens",e)}))}))}catch(e){console.log(e)}}Object(i.useEffect)((function(){o();var e=!t&&setInterval((function(){n.length?clearInterval(e):o()}),5e3);return function(){e&&clearInterval(e)}}),[n,t])}(),Object(i.useEffect)((function(){if(Te.length){var e=Te.filter((function(e){return Re===e.id}))[0];b(e||Te[0]),e=Te.filter((function(e){return Ie===e.id}))[0],g(e||Te[1])}}),[Te]),Object(i.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.client.api.network.getNetwork();case 2:t=e.sent,s(new _.RpcClient("http://".concat(t.address,":20336")));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ne&&!n&&function(){e.apply(this,arguments)}()}),[Ne]),Object(i.useEffect)((function(){if(Ne&&j.id)if("ONT"!==j.name&&"ONG"!==j.name){var e={scriptHash:j.address,operation:"balanceOf",args:[{type:"Address",value:Ne}]};d.client.api.smartContract.invokeRead(e).then((function(e){e&&E(parseInt(M(e),16)/Math.pow(10,j.decimals))}))}else n&&n.getBalance(new W(Ne)).then((function(e){e.error||E(new R.a(e.result[j.name.toLowerCase()]).div(Math.pow(10,j.decimals)).toString())}))}),[Ne,j]),Object(i.useEffect)((function(){function e(){if(j.id){if(j.id===x.id)return G([]),void Oe(0);try{d.client.api.smartContract.invokeWasmRead({scriptHash:h,operation:"get_makes_of_pair",args:[{type:"Long",value:j.id},{type:"Long",value:x.id}]}).then((function(e){for(var t=[],n=new P(e),a=n.readUint128(),c=j.id<x.id?j.id:x.id,i=j.id<x.id?x.id:j.id,s=0;s<=1;s++)for(var r=n.readNextLen(),o=0;o<r;o++){var l={};l.make_id=n.readUint128(),l.price=n.readUint128(),l.amount=new R.a(n.readUint128()).toString(),l.asset_token_id=0===s?c:i,l.price_token_id=0===s?i:c,t.push(l)}Oe(a?j.id<x.id?a/U:U/a:0),G(t)})).catch((function(e){I(e,(function(t){"CONTRACT_ADDRESS_ERROR"===t?Ce(!0):console.log("get makes of pair",e)}))}))}catch(e){console.log(e)}}}e();var t=!Se&&setInterval(e,2e3);return function(){t&&clearInterval(t)}}),[j,x,Ne,Se]),Object(i.useEffect)((function(){function e(){if(Ne)try{d.client.api.smartContract.invokeWasmRead({scriptHash:h,operation:"get_user_makes",args:[{type:"Address",value:Ne}]}).then((function(e){for(var t=[],n=new P(e),a=n.readNextLen(),c=0;c<a;c++){var i={};i.address=d.client.api.utils.hexToAddress(n.read(20)),i.asset_token_id=n.readUint128(),i.price_token_id=n.readUint128(),i.price=n.readUint128(),i.amount=n.readUint128(),i.make_id=n.readUint128(),t.push(i)}J(t)})).catch((function(e){I(e,(function(t){"CONTRACT_ADDRESS_ERROR"===t?Ce(!0):console.log("get user makes",e)}))}))}catch(e){console.log(e)}}e();var t=!Se&&setInterval(e,5e3);return function(){t&&clearInterval(t)}}),[j,x,Ne,Se]),Object(i.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(l.a.mark((function e(){var t,n,a,c,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Te.length){e.next=17;break}return e.prev=1,e.next=4,d.client.api.smartContract.invokeWasmRead({scriptHash:h,operation:"stat",args:[]});case 4:for(t=e.sent,n=[],a=new P(t),ke(a.readUint128()),c=a.readNextLen(),i=function(e){var t={};t.id=a.readUint128();var c=Te.filter((function(e){return e.id===t.id}))[0];t.balance=new R.a(a.readUint128()).div(new R.a(Math.pow(10,c.decimals))).toString(),t.name=c.name,n.push(t)},s=0;s<c;s++)i();be(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),I(e.t0,(function(t){"CONTRACT_ADDRESS_ERROR"===t?Ce(!0):console.log("get stat",e.t0)}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}e();var n=setInterval((function(){Se?clearInterval(n):e()}),5e3);return function(){return clearInterval(n)}}),[Te,Se]),Object(i.useEffect)((function(){le((ee||0)*(ce||0))}),[ee,ce]),Object(i.useEffect)((function(){$("all")}),[Ne]);var Ae=function(e){if(Te.length){var t="asset"===e?Me:We,n={};return n="asset"===e?Te.filter((function(e){return Re===e.id}))[0]||Te[0]:Te.filter((function(e){return Ie===e.id}))[0]||Te[1],Object(c.jsx)(C.a,{className:"token-select",defaultValue:n,options:Te,isSearchable:!1,components:{Option:function(e){return Object(c.jsx)(y.f.Option,Object(a.a)(Object(a.a)({},e),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"icon-".concat(e.label," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:e.label})]})}))},SingleValue:function(e){var t=e.children,n=Object(T.a)(e,["children"]);return Object(c.jsx)(y.f.SingleValue,Object(a.a)(Object(a.a)({},n),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"icon-".concat(t," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:t})]})}))}},onChange:function(e){return t(e)},theme:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderRadius:0,colors:Object(a.a)(Object(a.a)({},e.colors),{},{primary:"#2c2c2c"})})}})}};function Le(e){if(j.id){var t="my"===Q?B:H;return"sell"===e?t.filter((function(e){return e.asset_token_id===j.id&&e.price_token_id===x.id})).map((function(e){return Object(c.jsxs)("div",{className:"my-make-item reverse",children:[Object(c.jsx)("div",{className:"make-item-detail make-sell",children:e.price/U}),Object(c.jsx)("div",{className:"make-item-detail",children:new R.a(e.amount).div(Math.pow(10,j.decimals)).toString()}),"my"===Q&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return Ue(e.make_id)},children:"Cancel"})]},e.make_id)})):t.filter((function(e){return e.asset_token_id===x.id&&e.price_token_id===j.id})).map((function(e){return Object(c.jsxs)("div",{className:"my-make-item",children:[Object(c.jsx)("div",{className:"make-item-detail make-buy",children:U/e.price}),Object(c.jsx)("div",{className:"make-item-detail",children:new R.a(e.amount).times(e.price).div(U).div(Math.pow(10,x.decimals)).toString()}),"my"===Q&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return Ue(e.make_id)},children:"Cancel"})]},e.make_id)}))}return null}function De(){return(De=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne){e.next=3;break}return Ee.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!j.id){e.next=24;break}if(j.id!==x.id){e.next=7;break}return Ee.error("Please select different token"),e.abrupt("return");case 7:if(!(ee<=0)){e.next=10;break}return Ee.error("Price should be greater than 0"),e.abrupt("return");case 10:if(!(ce<=0)){e.next=13;break}return Ee.error("Amount should be greater than 0"),e.abrupt("return");case 13:return e.prev=13,t=[{type:"Address",value:Ne},{type:"Long",value:j.id},{type:"Long",value:x.id},{type:"Long",value:new R.a(ee).times(U).integerValue(R.a.ROUND_DOWN).toString()},{type:"Long",value:new R.a(ce).times(new R.a(Math.pow(10,j.decimals))).integerValue(R.a.ROUND_DOWN).toString()}],e.next=17,d.client.api.smartContract.invokeWasm({scriptHash:h,operation:"make",args:t,gasPrice:2500,gasLimit:3e6,requireIdentity:!1});case 17:(n=e.sent).transaction&&ye("infoModal",{show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"https://explorer.ont.io/transaction/".concat(n.transaction)}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(13),ye("infoModal",{show:!0,type:"error",text:"Transaction Failed",extraText:"".concat(e.t0),extraLink:""});case 24:case"end":return e.stop()}}),e,null,[[13,21]])})))).apply(this,arguments)}function Ue(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ne||!t){e.next=9;break}return e.prev=1,e.next=4,d.client.api.smartContract.invokeWasm({scriptHash:h,operation:"unmake",args:[{type:"Address",value:Ne},{type:"Long",value:t}],gasPrice:2500,gasLimit:3e6,requireIdentity:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("onunmake",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Me(e){e.value!==j.id&&(G([]),Oe(0),b(Te.filter((function(t){return t.id===e.value}))[0]))}function We(e){e.value!==x.id&&(G([]),Oe(0),g(Te.filter((function(t){return t.id===e.value}))[0]))}return Object(c.jsxs)("div",{className:"swap-wrapper",children:[we?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper transparent-bg",children:[Object(c.jsx)("div",{className:"modal-icon-loading modal-icon"}),Object(c.jsx)("div",{className:"modal-text light",children:"Loading..."})]})}):null,Object(c.jsxs)("div",{className:"trade-container",children:[Object(c.jsxs)("div",{className:"make-wrapper",children:[Object(c.jsx)("div",{className:"container-header",children:"Trade"}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Sell",Object(c.jsxs)("span",{className:"hint",children:["Balance: ",w]})]}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Ae("asset"),Object(c.jsx)("input",{className:"input inline-input",placeholder:"Amount",type:"number",onChange:function(e){return ie(e.target.value)}})]})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Price",Object(c.jsx)("span",{className:"hint",children:function(){if(j.id)return"1 ".concat(j.name," = ").concat(ee||"?"," ").concat(x.name)}()})]}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)("input",{className:"input",placeholder:"Price",type:"number",onChange:function(e){return te(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Will Get",Object(c.jsx)("span",{className:"hint",children:"(Handling fee undeducted)"})]}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Ae("price"),Object(c.jsx)("input",{className:"input inline-input",disabled:!0,type:"number",value:oe})]})]}),xe?Object(c.jsxs)("p",{className:"fee-rate",children:["* The fee rate of transaction is ",xe/100,"%"]}):null,Object(c.jsx)("div",{className:"make-btn",onClick:function(){return function(){return De.apply(this,arguments)}()},children:"Sell"})]}),Object(c.jsxs)("div",{className:"trade-panel",children:[Object(c.jsxs)("div",{className:"panel-header",children:[Object(c.jsx)("div",{className:"panel-title",children:"Order Book"}),Object(c.jsxs)("div",{className:"tabs",children:[Object(c.jsx)("div",{className:"all"===Q?"tab-wrapper selected":"tab-wrapper",onClick:function(){return $("all")},children:"All"}),Object(c.jsx)("div",{className:"my"===Q?"tab-wrapper selected":"tab-wrapper",onClick:function(){Ne?$("my"):Ee.show("Please Connect Wallet First")},children:"My"})]})]}),Object(c.jsxs)("div",{className:"list-title",children:[Object(c.jsx)("div",{className:"blank-placeholder"}),Object(c.jsxs)("div",{className:"title-items",children:[Object(c.jsxs)("div",{className:"item-text",children:["Price (",function(){if(j.id&&x.id)return"".concat(j.name,"/").concat(x.name)}(),")"]}),Object(c.jsxs)("div",{className:"item-text",children:["Amount (",function(){if(j.id)return j.name}(),")"]}),"my"===Q&&Object(c.jsx)("div",{className:"item-placeholder"})]})]}),Object(c.jsxs)("div",{className:"sell-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Sell"}),Object(c.jsx)("div",{className:"make-list reverse",children:Le("sell")})]}),"all"===Q&&0!=fe?Object(c.jsxs)("div",{className:"last-price-wrapper",children:[Object(c.jsx)("div",{className:"last-price-label",children:"Last Price"}),Object(c.jsx)("div",{className:"last-price",children:fe}),Object(c.jsx)("div",{className:"last-price-placeholder"})]}):null,Object(c.jsxs)("div",{className:"buy-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Buy"}),Object(c.jsx)("div",{className:"make-list",children:Le("buy")})]})]})]}),Object(c.jsxs)("div",{className:"token-pool",children:[Object(c.jsx)("div",{className:"container-header",children:"Token Balance"}),Object(c.jsx)("div",{className:"pool-items",children:function(){if(je.length)return je.filter((function(e){return 0!=e.balance})).map((function(e){return Object(c.jsxs)("div",{className:"pool-item",children:[Object(c.jsx)("div",{className:"icon-".concat(e.name," token-name"),children:e.name}),Object(c.jsx)("div",{className:"token-balance",children:e.balance})]},e.name)}))}()})]})]})},V=(n(595),_.utils.StringReader),H=function(){var e=Object(i.useState)({}),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)({}),r=Object(f.a)(s,2),o=(r[0],r[1]),j=Object(i.useState)(""),b=Object(f.a)(j,2),O=b[0],h=b[1],x=Object(i.useState)([]),k=Object(f.a)(x,2),g=k[0],N=k[1],S=Object(i.useState)("stake"),w=Object(f.a)(S,2),T=w[0],_=w[1],y=Object(i.useState)(!1),C=Object(f.a)(y,2),E=C[0],D=C[1],U=Object(p.c)((function(e){return{account:e.wallet.account,loadingStakingToken:e.common.loadingStakingToken,stopStakingInterval:e.common.stopStakingInterval,stakingTokens:e.common.stakingTokens}})),P=U.account,M=U.loadingStakingToken,W=U.stopStakingInterval,K=U.stakingTokens,H=Object(p.b)(),G=Object(i.useCallback)((function(e,t){return H({type:"SET_MODAL",modalType:e,modalDetail:t})}),[]),F=Object(i.useCallback)((function(e){return H({type:"SET_STOP_STAKING_INTERVAL",stopStakingInterval:e})}),[]),q=Object(m.c)();function B(){P&&K.length&&Promise.all(K.map((function(e){return t=e.id,d.client.api.smartContract.invokeWasmRead({scriptHash:v,operation:"account_stake_info",args:[{type:"Address",value:P},{type:"Long",value:t}]}).then((function(e){var n=new V(e);return{id:t,balance:n.readUint128(),interest:n.readUint128()}}));var t}))).then((function(e){N(e)})).catch((function(e){I(e,(function(t){"CONTRACT_ADDRESS_ERROR"===t?F(!0):console.log("get account stakes",e)}))}))}function J(){return(J=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=3;break}return q.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!n.id){e.next=23;break}if(!(O<=0)){e.next=7;break}return q.error("Amount should be greater than 0"),e.abrupt("return");case 7:if(!("unstake"===T&&O>g.find((function(e){return e.id===n.id})).balance)){e.next=10;break}return q.error("Amount should be less than your balance"),e.abrupt("return");case 10:return e.prev=10,t=[{type:"Address",value:P},{type:"Long",value:n.id},{type:"Long",value:new R.a(O).times(new R.a(Math.pow(10,n.decimals))).integerValue(R.a.ROUND_DOWN).toString()}],e.next=14,d.client.api.smartContract.invokeWasm({scriptHash:v,operation:T,args:t,gasPrice:2500,gasLimit:3e6,requireIdentity:!1});case 14:(a=e.sent).transaction&&(_("stake"),D(!1),G("infoModal",{show:!0,type:"success",text:"".concat("stake"===T?"Stake":"Unstake"," Successful"),extraText:"View Transaction",extraLink:"https://explorer.ont.io/transaction/".concat(a.transaction)})),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(10),_("stake"),D(!1),G("infoModal",{show:!0,type:"error",text:"".concat("stake"===T?"Stake":"Unstake"," Failed"),extraText:"".concat(e.t0),extraLink:""});case 23:case"end":return e.stop()}}),e,null,[[10,18]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){d.client.api.smartContract.invokeWasmRead({scriptHash:v,operation:"staking_info",args:[]}).then((function(e){var t={},n=new V(e);t.amount=n.readUint128(),t.period=n.readUint128(),t.start_time=n.readUint128(),t.settled_time=n.readUint128(),t.interest=t.amount/t.period,o(t)})).catch((function(e){I(e,(function(t){"CONTRACT_ADDRESS_ERROR"===t?F(!0):console.log("get staking info",e)}))}))}),[]),function(){var e=Object(p.c)((function(e){return{stopStakingInterval:e.common.stopStakingInterval,stakingTokens:e.common.stakingTokens}})),t=e.stopStakingInterval,n=(e.stakingTokens,Object(p.b)()),a=Object(i.useCallback)((function(e){return n({type:"SET_LOADING_STAKING_TOKEN",loadingStakingToken:e})}),[]),c=Object(i.useCallback)((function(e){return n({type:"SET_STAKING_TOKENS",stakingTokens:e})}),[]),s=Object(i.useCallback)((function(e){return n({type:"SET_STOP_STAKING_INTERVAL",stopStakingInterval:e})}),[]);function r(){try{d.client.api.smartContract.invokeWasmRead({scriptHash:v,operation:"get_all_tokens",args:[]}).then((function(e){a(!1);for(var t=[],n=new A(e),i=n.readNextLen(),s=0;s<i;s++){var r={},o=n.readNextLen();r.name=L(n.read(o)),r.address=n.read(20),r.weight=n.readUint128(),r.ty=n.readUint8(),r.decimals=n.readUint128(),r.id=n.readUint128(),r.balance=n.readUint128(),t.push(r)}for(var l={},u=0;u<t.length;u++)l[t[u].name]=t[u];var d=Object.values(l).filter((function(e){return e.balance})).reduce((function(e,t){return e+t.weight}),0),j=Object.values(l).map((function(e){return{id:e.id,decimals:e.decimals,name:e.name,weight:e.balance?e.weight/d:0,balance:e.balance,value:e.id,label:e.name}}));c(j)})).catch((function(e){console.log(e),I(e,(function(t){console.log(t),"CONTRACT_ADDRESS_ERROR"===t?s(!0):console.log("get staking tokens",e)}))}))}catch(e){console.log(e)}}Object(i.useEffect)((function(){r();var e=!t&&setInterval(r,5e3);return function(){e&&clearInterval(e)}}),[t])}(),Object(i.useEffect)((function(){K.length&&(n.id||a(K[0]),B())}),[K]),Object(i.useEffect)((function(){if(P&&K.length){B();var e=!W&&setInterval(B,5e3);return function(){e&&clearInterval(e)}}}),[K,P]),Object(i.useEffect)((function(){P||N([])}),[P]),Object(c.jsxs)("div",{className:"stake-container",children:[M?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper transparent-bg",children:[Object(c.jsx)("div",{className:"modal-icon-loading modal-icon"}),Object(c.jsx)("div",{className:"modal-text light",children:"Loading..."})]})}):null,Object(c.jsxs)("div",{className:"stake-pool",children:[Object(c.jsx)("div",{className:"title"}),Object(c.jsx)("div",{className:"pool-list",children:function(){if(K.length)return K.map((function(e){var t=g.find((function(t){return t.id===e.id}))||{};return Object(c.jsx)("div",{className:"pool-list-item",children:Object(c.jsxs)("div",{className:"icon-".concat(e.name," item-detail"),children:[Object(c.jsx)("div",{className:"token-name",children:e.name}),Object(c.jsxs)("div",{className:"token-balance",children:["Total Staking",Object(c.jsx)("p",{children:new R.a(e.balance||0).div(Math.pow(10,e.decimals)).toString()})]}),Object(c.jsxs)("div",{className:"staked-amount",children:["Staked",Object(c.jsxs)("p",{children:[new R.a(t.balance||0).div(Math.pow(10,e.decimals)).toString()," ",Object(c.jsx)("span",{children:e.name})]})]}),Object(c.jsxs)("div",{className:"earned-amount",children:["Earned",Object(c.jsxs)("p",{children:[new R.a(t.interest||0).div(Math.pow(10,9)).toString()," ",Object(c.jsx)("span",{children:"UNX"})]})]}),Object(c.jsx)("div",{className:"deposit-btn",onClick:function(){return function(e){P?(a(e),D(!0)):q.show("Please Connect Wallet First")}(e)},children:"Deposit"})]})},e.name)}))}()})]}),E?Object(c.jsx)("div",{className:"modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){_("stake"),D(!1)}}),Object(c.jsxs)("div",{className:"stake-wrapper",children:[Object(c.jsxs)("div",{className:"stake-tabs",children:[Object(c.jsx)("div",{className:"".concat("stake"===T?"selected":""," stake-tab-item"),onClick:function(){return _("stake")},children:"Stake"}),Object(c.jsx)("div",{className:"".concat("unstake"===T?"selected":""," stake-tab-item"),onClick:function(){return _("unstake")},children:"Unstake"})]}),Object(c.jsx)("div",{className:"icon-".concat(n.name," token-placeholder")}),Object(c.jsx)("div",{className:"form-item",children:Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)("input",{className:"input inline-input",placeholder:"Amount",type:"number",onChange:function(e){return h(e.target.value)}})})}),Object(c.jsx)("div",{className:"stake-btn",onClick:function(){return function(){return J.apply(this,arguments)}()},children:"Confirm"})]})]})}):null]})},G=(n(596),function(e){return Object(c.jsx)("div",{className:"coming-soon-placeholder"})}),F=(n(597),function(){var e=Object(m.c)(),t=Object(p.c)((function(e){return{account:e.wallet.account}})).account,n=Object(p.b)(),a=Object(i.useCallback)((function(e){return n({type:"SET_ACCOUNT",account:e})}),[]);function s(){return r.apply(this,arguments)}function r(){return(r=Object(u.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.client.api.provider.getProvider();case 3:return t.next=5,d.client.api.network.getNetwork();case 5:if(!(n=t.sent)||n.type===O){t.next=9;break}return e.error("Please connect to the ".concat(O,"-Net")),t.abrupt("return");case 9:return t.next=11,d.client.api.asset.getAccount();case 11:c=t.sent,a(c),localStorage.setItem("account",c),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),"NO_PROVIDER"===t.t0&&e.error("Please install wallet extension first");case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}return Object(c.jsx)(j.a,{children:Object(c.jsxs)("div",{className:"app",children:[null===t&&Object(c.jsx)("div",{className:"connect-wallet-overlay",children:Object(c.jsxs)("div",{className:"connect-wrapper",children:[Object(c.jsx)("p",{className:"connect-title",children:"Connect Wallet"}),Object(c.jsx)("div",{className:"wallet-item",onClick:function(){return s()},children:"Cyano Wallet"})]})}),Object(c.jsx)(w,{}),Object(c.jsx)(N,{onSignOut:function(){return a(""),void localStorage.setItem("account","")},onConnectWallet:function(){return s()}}),Object(c.jsx)("div",{className:"main-wrapper",children:Object(c.jsxs)(b.c,{children:[x.indexOf("/")>=0?Object(c.jsx)(b.a,{exact:!0,path:"/",children:Object(c.jsx)(K,{})}):null,x.indexOf("/staking")>=0?Object(c.jsx)(b.a,{exact:!0,path:"/staking",children:Object(c.jsx)(H,{})}):null,x.indexOf("/token")>=0?Object(c.jsx)(b.a,{exact:!0,path:"/token",children:Object(c.jsx)(G,{})}):null]})})]})})}),q=n(105),B=n(282),J=n(103),X={infoModal:{show:!1,type:"",text:"",extraText:"",extraLink:""}},Y={account:localStorage.getItem("account")},Q={loadingToken:!0,stopInterval:!1,tokens:[],loadingStakingToken:!0,stopStakingInterval:!1,stakingTokens:[]},$=Object(q.a)({modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODAL":return Object(a.a)(Object(a.a)({},e),{},Object(J.a)({},t.modalType,t.modalDetail));default:return Object(a.a)({},e)}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACCOUNT":return Object(a.a)(Object(a.a)({},e),{},{account:t.account});default:return Object(a.a)({},e)}},common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_TOKEN":return Object(a.a)(Object(a.a)({},e),{},{loadingToken:t.loadingToken});case"SET_STOP_INTERVAL":return Object(a.a)(Object(a.a)({},e),{},{stopInterval:t.stopInterval});case"SET_TOKENS":return Object(a.a)(Object(a.a)({},e),{},{tokens:t.tokens});case"SET_LOADING_STAKING_TOKEN":return Object(a.a)(Object(a.a)({},e),{},{loadingStakingToken:t.loadingStakingToken});case"SET_STOP_STAKING_INTERVAL":return Object(a.a)(Object(a.a)({},e),{},{stopStakingInterval:t.stopStakingInterval});case"SET_STAKING_TOKENS":return Object(a.a)(Object(a.a)({},e),{},{stakingTokens:t.stakingTokens});default:return Object(a.a)({},e)}}}),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,604)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))},Z=(n(599),n(600),Object(q.b)($));d.client.registerClient({});var ee={timeout:5e3,position:m.b.TOP_CENTER};r.a.render(Object(c.jsx)(m.a,Object(a.a)(Object(a.a)({template:B.a},ee),{},{children:Object(c.jsx)(p.a.Provider,{value:Z,children:Object(c.jsx)(F,{})})})),document.getElementById("root")),z()}},[[601,1,2]]]);
//# sourceMappingURL=main.2b97d0b0.chunk.js.map