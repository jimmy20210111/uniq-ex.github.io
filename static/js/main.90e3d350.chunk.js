(this["webpackJsonpuniq-ex"]=this["webpackJsonpuniq-ex"]||[]).push([[0],{278:function(e,t,n){},407:function(e,t){},408:function(e,t){},427:function(e,t){},429:function(e,t){},439:function(e,t){},441:function(e,t){},482:function(e,t){},484:function(e,t){},491:function(e,t){},492:function(e,t){},522:function(e,t){},541:function(e,t){},548:function(e,t,n){var a={"./aes":241,"./aes.js":241,"./big":242,"./big.js":242,"./ctx":146,"./ctx.js":146,"./ecdh":243,"./ecdh.js":243,"./ecp":244,"./ecp.js":244,"./ecp2":245,"./ecp2.js":245,"./ff":246,"./ff.js":246,"./fp":247,"./fp.js":247,"./fp12":248,"./fp12.js":248,"./fp2":249,"./fp2.js":249,"./fp4":250,"./fp4.js":250,"./gcm":251,"./gcm.js":251,"./hash256":252,"./hash256.js":252,"./hash384":253,"./hash384.js":253,"./hash512":254,"./hash512.js":254,"./mpin":255,"./mpin.js":255,"./newhope":256,"./newhope.js":256,"./nhs":257,"./nhs.js":257,"./pair":258,"./pair.js":258,"./rand":259,"./rand.js":259,"./rom_curve":260,"./rom_curve.js":260,"./rom_field":261,"./rom_field.js":261,"./rsa":262,"./rsa.js":262,"./sha3":263,"./sha3.js":263,"./uint64":264,"./uint64.js":264};function c(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=i,e.exports=c,c.id=548},562:function(e,t,n){},579:function(e,t,n){"use strict";n.r(t);var a=n(21),c=n(1),i=n(0),r=n(23),s=n.n(r),l=(n(278),n(272)),o=n(38),d=n.n(o),u=n(82),j=n(15),m=n(27),p=n(148),b=n(7),h=n(270),f=n(271),O=n(34),v=n.n(O),x=n(81);function N(e,t){var n=new RegExp("(^|&)".concat(t,"=([^&]*)(&|$)"),"i"),a=e.substr(1).match(n);return null!=a?a[2]:null}var g="MAIN",k="2327be612cf6126bc54f5e8d77dcf2faf1883e6e",w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};try{var n=JSON.parse(e);"wasm contract does not exist"===n.Result&&t("CONTRACT_ADDRESS_ERROR")}catch(a){}},y=(n(562),Math.pow(10,6)),_=p.utils.StringReader,S=p.utils.hexstr2str,C=function(){var e=Object(i.useState)(localStorage.getItem("account")),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)([]),o=Object(j.a)(s,2),p=o[0],O=o[1],C=Object(i.useState)({}),R=Object(j.a)(C,2),T=R[0],L=R[1],A=Object(i.useState)({}),I=Object(j.a)(A,2),E=I[0],U=I[1],D=Object(i.useState)([]),P=Object(j.a)(D,2),W=P[0],q=P[1],F=Object(i.useState)([]),M=Object(j.a)(F,2),H=M[0],V=M[1],B=Object(i.useState)("all"),J=Object(j.a)(B,2),G=J[0],X=J[1],Y=Object(i.useState)(""),$=Object(j.a)(Y,2),z=$[0],K=$[1],Q=Object(i.useState)(""),Z=Object(j.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(i.useState)(0),ae=Object(j.a)(ne,2),ce=ae[0],ie=ae[1],re=Object(i.useState)([]),se=Object(j.a)(re,2),le=se[0],oe=se[1],de=Object(i.useState)(0),ue=Object(j.a)(de,2),je=ue[0],me=ue[1],pe=Object(i.useState)({show:!1,type:"success",text:"",extraText:"",extraLink:""}),be=Object(j.a)(pe,2),he=be[0],fe=be[1],Oe=Object(i.useState)(!1),ve=Object(j.a)(Oe,2),xe=ve[0],Ne=ve[1],ge=Object(i.useState)(!0),ke=Object(j.a)(ge,2),we=ke[0],ye=ke[1],_e=Object(i.useState)(!1),Se=Object(j.a)(_e,2),Ce=Se[0],Re=Se[1],Te=Object(i.useState)(0),Le=Object(j.a)(Te,2),Ae=Le[0],Ie=Le[1],Ee=Object(x.c)(),Ue=parseInt(N(window.location.hash,"asset")||1),De=parseInt(N(window.location.hash,"price")||2);function Pe(){if(!p.length)try{m.client.api.smartContract.invokeWasmRead({scriptHash:k,operation:"get_all_tokens",args:[]}).then((function(e){ye(!1);for(var t=[],n=new _(e),a=n.readNextLen(),c=0;c<a;c++){var i={},r=n.readNextLen();i.name=S(n.read(r)),i.address=n.read(20),i.ty=n.readUint8(),i.decimals=n.readUint128(),i.id=n.readUint128(),t.push(i)}for(var s={},l=0;l<t.length;l++)s[t[l].name]=t[l];var o=Object.values(s).map((function(e){return{id:e.id,decimals:e.decimals,name:e.name,value:e.id,label:e.name}}));O(o);var d=o.filter((function(e){return Ue===e.id}))[0];L(d||o[0]),d=o.filter((function(e){return De===e.id}))[0],U(d||o[1])})).catch((function(e){console.log(e),w(e,(function(t){console.log(t),"CONTRACT_ADDRESS_ERROR"===t?Re(!0):console.log("get all tokens",e)}))}))}catch(e){console.log(e)}}function We(){return qe.apply(this,arguments)}function qe(){return(qe=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.client.api.provider.getProvider();case 3:return e.next=5,m.client.api.network.getNetwork();case 5:if(!(t=e.sent)||t.type===g){e.next=9;break}return Ee.error("Please connect to the ".concat(g,"-Net")),e.abrupt("return");case 9:return e.next=11,m.client.api.asset.getAccount();case 11:n=e.sent,r(n),localStorage.setItem("account",n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),"NO_PROVIDER"===e.t0&&Ee.error("Please install wallet extension first");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function Fe(){return(Fe=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return Ee.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!T.id){e.next=24;break}if(T.id!==E.id){e.next=7;break}return Ee.error("Please select different token"),e.abrupt("return");case 7:if(!(z<=0)){e.next=10;break}return Ee.error("Price should be greater than 0"),e.abrupt("return");case 10:if(!(ee<=0)){e.next=13;break}return Ee.error("Amount should be greater than 0"),e.abrupt("return");case 13:return e.prev=13,t=[{type:"Address",value:n},{type:"Long",value:T.id},{type:"Long",value:E.id},{type:"Long",value:new v.a(z).times(y).integerValue(v.a.ROUND_DOWN).toString()},{type:"Long",value:new v.a(ee).times(new v.a(Math.pow(10,T.decimals))).integerValue(v.a.ROUND_DOWN).toString()}],e.next=17,m.client.api.smartContract.invokeWasm({scriptHash:k,operation:"make",args:t,gasPrice:2500,gasLimit:3e6,requireIdentity:!1});case 17:(a=e.sent).transaction&&fe({show:!0,type:"success",text:"Transaction Successful",extraText:"View Transaction",extraLink:"https://explorer.ont.io/transaction/".concat(a.transaction)}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(13),fe({show:!0,type:"error",text:"Transaction Failed",extraText:"".concat(e.t0),extraLink:""});case 24:case"end":return e.stop()}}),e,null,[[13,21]])})))).apply(this,arguments)}function Me(e){return He.apply(this,arguments)}function He(){return(He=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!t){e.next=9;break}return e.prev=1,e.next=4,m.client.api.smartContract.invokeWasm({scriptHash:k,operation:"unmake",args:[{type:"Address",value:n},{type:"Long",value:t}],gasPrice:2500,gasLimit:3e6,requireIdentity:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("onunmake",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Ve(e){if(T.id){var t="my"===G?H:W;return"sell"===e?t.filter((function(e){return e.asset_token_id===T.id&&e.price_token_id===E.id})).map((function(e){return Object(c.jsxs)("div",{className:"my-make-item reverse",children:[Object(c.jsx)("div",{className:"make-item-detail make-sell",children:e.price/y}),Object(c.jsx)("div",{className:"make-item-detail",children:new v.a(e.amount).div(Math.pow(10,T.decimals)).toString()}),"my"===G&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return Me(e.make_id)},children:"Cancel"})]},e.make_id)})):t.filter((function(e){return e.asset_token_id===E.id&&e.price_token_id===T.id})).map((function(e){return Object(c.jsxs)("div",{className:"my-make-item",children:[Object(c.jsx)("div",{className:"make-item-detail make-buy",children:y/e.price}),Object(c.jsx)("div",{className:"make-item-detail",children:new v.a(e.amount).times(e.price).div(y).div(Math.pow(10,E.decimals)).toString()}),"my"===G&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return Me(e.make_id)},children:"Cancel"})]},e.make_id)}))}return null}function Be(e){if(p.length){var t="asset"===e?Je:Ge,n={};return n="asset"===e?p.filter((function(e){return Ue===e.id}))[0]||p[0]:p.filter((function(e){return De===e.id}))[0]||p[1],Object(c.jsx)(h.a,{className:"token-select",defaultValue:n,options:p,isSearchable:!1,components:{Option:function(e){return Object(c.jsx)(b.f.Option,Object(a.a)(Object(a.a)({},e),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"option-icon-".concat(e.label," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:e.label})]})}))},SingleValue:function(e){var t=e.children,n=Object(l.a)(e,["children"]);return Object(c.jsx)(b.f.SingleValue,Object(a.a)(Object(a.a)({},n),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"option-icon-".concat(t," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:t})]})}))}},onChange:function(e){return t(e)},theme:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderRadius:0,colors:Object(a.a)(Object(a.a)({},e.colors),{},{primary:"#2c2c2c"})})}})}}function Je(e){e.value!==T.id&&L(p.filter((function(t){return t.id===e.value}))[0])}function Ge(e){e.value!==E.id&&U(p.filter((function(t){return t.id===e.value}))[0])}function Xe(e){Ne(e)}return Object(i.useEffect)((function(){Pe();var e=!Ce&&setInterval((function(){p.length?clearInterval(e):Pe()}),5e3);return function(){e&&clearInterval(e)}}),[p,Ce]),Object(i.useEffect)((function(){function e(){if(T.id){if(T.id===E.id)return q([]),void me(0);try{m.client.api.smartContract.invokeWasmRead({scriptHash:k,operation:"get_makes_of_pair",args:[{type:"Long",value:T.id},{type:"Long",value:E.id}]}).then((function(e){for(var t=[],n=new _(e),a=n.readUint128(),c=T.id<E.id?T.id:E.id,i=T.id<E.id?E.id:T.id,r=0;r<=1;r++)for(var s=n.readNextLen(),l=0;l<s;l++){var o={};o.make_id=n.readUint128(),o.price=n.readUint128(),o.amount=new v.a(n.readUint128()).toString(),o.asset_token_id=0===r?c:i,o.price_token_id=0===r?i:c,t.push(o)}me(a?T.id<E.id?a/y:y/a:0),q(t)})).catch((function(e){w(e,(function(t){"CONTRACT_ADDRESS_ERROR"===t?Re(!0):console.log("get makes of pair",e)}))}))}catch(e){console.log(e)}}}e();var t=!Ce&&setInterval(e,2e3);return function(){t&&clearInterval(t)}}),[T,E,n,Ce]),Object(i.useEffect)((function(){function e(){if(n)try{m.client.api.smartContract.invokeWasmRead({scriptHash:k,operation:"get_user_makes",args:[{type:"Address",value:n}]}).then((function(e){for(var t=[],n=new _(e),a=n.readNextLen(),c=0;c<a;c++){var i={};i.address=m.client.api.utils.hexToAddress(n.read(20)),i.asset_token_id=n.readUint128(),i.price_token_id=n.readUint128(),i.price=n.readUint128(),i.amount=n.readUint128(),i.make_id=n.readUint128(),t.push(i)}V(t)})).catch((function(e){w(e,(function(t){"CONTRACT_ADDRESS_ERROR"===t?Re(!0):console.log("get user makes",e)}))}))}catch(e){console.log(e)}}e();var t=!Ce&&setInterval(e,5e3);return function(){t&&clearInterval(t)}}),[T,E,n,Ce]),Object(i.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(u.a)(d.a.mark((function e(){var t,n,a,c,i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.length){e.next=17;break}return e.prev=1,e.next=4,m.client.api.smartContract.invokeWasmRead({scriptHash:k,operation:"stat",args:[]});case 4:for(t=e.sent,n=[],a=new _(t),Ie(a.readUint128()),c=a.readNextLen(),i=function(e){var t={};t.id=a.readUint128();var c=p.filter((function(e){return e.id===t.id}))[0];t.balance=new v.a(a.readUint128()).div(new v.a(Math.pow(10,c.decimals))).toString(),t.name=c.name,n.push(t)},r=0;r<c;r++)i();oe(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),w(e.t0,(function(t){"CONTRACT_ADDRESS_ERROR"===t?Re(!0):console.log("get stat",e.t0)}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}e();var n=setInterval((function(){Ce?clearInterval(n):e()}),5e3);return function(){return clearInterval(n)}}),[p,Ce]),Object(i.useEffect)((function(){ie((z||0)*(ee||0))}),[z,ee]),Object(i.useEffect)((function(){X("all")}),[n]),Object(c.jsxs)("div",{className:"app",children:[null===n&&Object(c.jsx)("div",{className:"connect-wallet-overlay",children:Object(c.jsxs)("div",{className:"connect-wrapper",children:[Object(c.jsx)("p",{className:"connect-title",children:"Connect Wallet"}),Object(c.jsx)("div",{className:"wallet-item",onClick:function(){return We()},children:"Cyano Wallet"})]})}),he.show?Object(c.jsx)("div",{className:"info-modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){fe(Object(a.a)(Object(a.a)({},he),{},{show:!1}))}}),Object(c.jsx)("div",{className:"modal-icon-".concat(he.type," modal-icon")}),Object(c.jsx)("div",{className:"modal-text-".concat(he.type," modal-text"),children:he.text}),Object(c.jsx)("div",{className:"modal-extra-text",children:he.extraLink?Object(c.jsx)("a",{className:"transaction-link",target:"_blank",rel:"noreferrer",href:he.extraLink,children:he.extraText}):he.extraText})]})}):null,xe?Object(c.jsx)("div",{className:"info-modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){return Xe(!1)}}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex is a pure github based DAO dex, all activities are logged on github."}),Object(c.jsxs)("p",{className:"intro-line",children:["You can open issues for discussion ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/uniq-ex/uniq-ex/issues",children:"here"})]}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex's future business will not be limited to exchanges though, we may enter various DeFi markets like compound or hegic."}),Object(c.jsxs)("p",{className:"intro-line",children:["We're open to crowdfunding, you can buy UNX(the governance token of uniq-ex) ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://uniq-ex.github.io/#asset=8&price=14",children:"here"})]})]})}):null,we?Object(c.jsx)("div",{className:"info-modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"modal-icon-loading modal-icon"}),Object(c.jsx)("div",{className:"modal-text",children:"Loading Tokens"})]})}):null,Object(c.jsx)("div",{className:"header",children:Object(c.jsxs)("div",{className:"content-wrapper",children:[Object(c.jsx)("div",{className:"logo-wrapper",children:Object(c.jsx)("div",{className:"site-intro",onClick:function(){return Xe(!0)}})}),Object(c.jsxs)("div",{className:"profile-wrapper",children:[n&&Object(c.jsx)("span",{className:"account-address",children:n}),n&&Object(c.jsx)("span",{className:"signout-btn",onClick:function(){return r(""),void localStorage.setItem("account","")},children:"Sign Out"}),""===n&&Object(c.jsx)("span",{className:"connect-btn",onClick:function(){return We()},children:"Connect Wallet"})]})]})}),Object(c.jsxs)("div",{className:"notice-wrapper",children:[Object(c.jsx)(f.a,{}),Object(c.jsx)("span",{"data-tip":"The governance token of uniq-ex",children:"UNX"})," is currently open to ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://uniq-ex.github.io/#asset=8&price=14",children:"crowdfunding"}),"!"]}),Object(c.jsxs)("div",{className:"trade-container",children:[Object(c.jsxs)("div",{className:"make-wrapper",children:[Object(c.jsx)("div",{className:"container-header",children:"Transaction"}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsx)("div",{className:"item-title",children:"Amount"}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Be("asset"),Object(c.jsx)("input",{className:"input inline-input",placeholder:"Amount",type:"number",onChange:function(e){return te(e.target.value)}})]})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Price",Object(c.jsx)("span",{className:"hint",children:function(){if(T.id)return"1 ".concat(T.name," = ").concat(z||"?"," ").concat(E.name)}()})]}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)("input",{className:"input",placeholder:"Price",type:"number",onChange:function(e){return K(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsx)("div",{className:"item-title",children:"Will Get"}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Be("price"),Object(c.jsx)("input",{className:"input inline-input",disabled:!0,type:"number",value:ce})]})]}),Ae?Object(c.jsxs)("p",{className:"fee-rate",children:["* The fee rate of transaction is ",Ae/100,"%"]}):null,Object(c.jsx)("div",{className:"make-btn",onClick:function(){return function(){return Fe.apply(this,arguments)}()},children:"Sell"})]}),Object(c.jsxs)("div",{className:"trade-panel",children:[Object(c.jsxs)("div",{className:"panel-header",children:[Object(c.jsx)("div",{className:"panel-title",children:"Order Book"}),Object(c.jsxs)("div",{className:"tabs",children:[Object(c.jsx)("div",{className:"all"===G?"tab-wrapper selected":"tab-wrapper",onClick:function(){return X("all")},children:"All"}),Object(c.jsx)("div",{className:"my"===G?"tab-wrapper selected":"tab-wrapper",onClick:function(){n?X("my"):Ee.show("Please Connect Wallet First")},children:"My"})]})]}),Object(c.jsxs)("div",{className:"list-title",children:[Object(c.jsx)("div",{className:"blank-placeholder"}),Object(c.jsxs)("div",{className:"title-items",children:[Object(c.jsxs)("div",{className:"item-text",children:["Price (",function(){if(T.id&&E.id)return"".concat(T.name,"/").concat(E.name)}(),")"]}),Object(c.jsxs)("div",{className:"item-text",children:["Amount (",function(){if(T.id)return T.name}(),")"]}),"my"===G&&Object(c.jsx)("div",{className:"item-placeholder"})]})]}),Object(c.jsxs)("div",{className:"sell-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Sell"}),Object(c.jsx)("div",{className:"make-list reverse",children:Ve("sell")})]}),"all"===G&&0!=je?Object(c.jsxs)("div",{className:"last-price-wrapper",children:[Object(c.jsx)("div",{className:"last-price-label",children:"Last Price"}),Object(c.jsx)("div",{className:"last-price",children:je}),Object(c.jsx)("div",{className:"last-price-placeholder"})]}):null,Object(c.jsxs)("div",{className:"buy-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Buy"}),Object(c.jsx)("div",{className:"make-list",children:Ve("buy")})]})]})]}),Object(c.jsxs)("div",{className:"token-pool",children:[Object(c.jsx)("div",{className:"container-header",children:"Token Balance"}),Object(c.jsx)("div",{className:"pool-items",children:function(){if(le.length)return le.filter((function(e){return 0!=e.balance})).map((function(e){return Object(c.jsxs)("div",{className:"pool-item",children:[Object(c.jsx)("div",{className:"token-name",children:e.name}),Object(c.jsx)("div",{className:"token-balance",children:e.balance})]},e.name)}))}()})]})]})},R=n(269),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,583)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};m.client.registerClient({});var L={timeout:5e3,position:x.b.TOP_RIGHT};s.a.render(Object(c.jsx)(x.a,Object(a.a)(Object(a.a)({template:R.a},L),{},{children:Object(c.jsx)(C,{})})),document.getElementById("root")),T()}},[[579,1,2]]]);
//# sourceMappingURL=main.90e3d350.chunk.js.map