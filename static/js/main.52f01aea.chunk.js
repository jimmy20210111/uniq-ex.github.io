(this["webpackJsonpuniq-ex"]=this["webpackJsonpuniq-ex"]||[]).push([[0],{277:function(e,t,n){},406:function(e,t){},407:function(e,t){},426:function(e,t){},428:function(e,t){},438:function(e,t){},440:function(e,t){},481:function(e,t){},483:function(e,t){},490:function(e,t){},491:function(e,t){},521:function(e,t){},540:function(e,t){},547:function(e,t,n){var a={"./aes":241,"./aes.js":241,"./big":242,"./big.js":242,"./ctx":146,"./ctx.js":146,"./ecdh":243,"./ecdh.js":243,"./ecp":244,"./ecp.js":244,"./ecp2":245,"./ecp2.js":245,"./ff":246,"./ff.js":246,"./fp":247,"./fp.js":247,"./fp12":248,"./fp12.js":248,"./fp2":249,"./fp2.js":249,"./fp4":250,"./fp4.js":250,"./gcm":251,"./gcm.js":251,"./hash256":252,"./hash256.js":252,"./hash384":253,"./hash384.js":253,"./hash512":254,"./hash512.js":254,"./mpin":255,"./mpin.js":255,"./newhope":256,"./newhope.js":256,"./nhs":257,"./nhs.js":257,"./pair":258,"./pair.js":258,"./rand":259,"./rand.js":259,"./rom_curve":260,"./rom_curve.js":260,"./rom_field":261,"./rom_field.js":261,"./rsa":262,"./rsa.js":262,"./sha3":263,"./sha3.js":263,"./uint64":264,"./uint64.js":264};function c(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=547},561:function(e,t,n){},578:function(e,t,n){"use strict";n.r(t);var a=n(22),c=n(1),r=n(0),i=n(24),s=n.n(i),l=(n(277),n(271)),o=n(17),u=n.n(o),d=n(44),j=n(20),p=n(28),m=n(148),b=n(6),h=n(270),f=n(35),v=n.n(f),x=n(82);function O(e,t){var n=new RegExp("(^|&)".concat(t,"=([^&]*)(&|$)"),"i"),a=e.substr(1).match(n);return null!=a?a[2]:null}var k="TEST",N="7378550ee4d31fd729ec1ab6843394b96eef1978",g=(n(561),Math.pow(10,6)),w=m.utils.StringReader,y=m.utils.hexstr2str,_=function(){var e=Object(r.useState)(localStorage.getItem("account")),t=Object(j.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)([]),o=Object(j.a)(s,2),m=o[0],f=o[1],_=Object(r.useState)({}),S=Object(j.a)(_,2),C=S[0],I=S[1],L=Object(r.useState)({}),U=Object(j.a)(L,2),T=U[0],P=U[1],W=Object(r.useState)([]),E=Object(j.a)(W,2),R=E[0],A=E[1],D=Object(r.useState)([]),q=Object(j.a)(D,2),F=q[0],H=q[1],M=Object(r.useState)("all"),V=Object(j.a)(M,2),B=V[0],G=V[1],J=Object(r.useState)(""),Y=Object(j.a)(J,2),$=Y[0],z=Y[1],K=Object(r.useState)(""),Q=Object(j.a)(K,2),X=Q[0],Z=Q[1],ee=Object(r.useState)(0),te=Object(j.a)(ee,2),ne=te[0],ae=te[1],ce=Object(r.useState)([]),re=Object(j.a)(ce,2),ie=re[0],se=re[1],le=Object(r.useState)({show:!1,type:"success",text:"",extraText:""}),oe=Object(j.a)(le,2),ue=oe[0],de=oe[1],je=Object(r.useState)(!1),pe=Object(j.a)(je,2),me=pe[0],be=pe[1],he=Object(r.useState)(!0),fe=Object(j.a)(he,2),ve=fe[0],xe=fe[1],Oe=Object(x.c)(),ke=parseInt(O(window.location.search,"asset")||1),Ne=parseInt(O(window.location.search,"price")||2);function ge(){return we.apply(this,arguments)}function we(){return(we=Object(d.a)(u.a.mark((function e(){var t,n,a,c,r,i,s,l,o,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.length){e.next=23;break}return e.prev=1,e.next=4,p.client.api.smartContract.invokeWasmRead({scriptHash:N,operation:"get_all_tokens",args:[]});case 4:for(t=e.sent,xe(!1),n=[],a=new w(t),c=a.readNextLen(),r=0;r<c;r++)i={},s=a.readNextLen(),i.name=y(a.read(s)),i.address=a.read(20),i.ty=a.readUint8(),i.decimals=a.readUint128(),i.id=a.readUint128(),n.push(i);for(l={},o=0;o<n.length;o++)l[n[o].name]=n[o];d=Object.values(l).map((function(e){return{id:e.id,decimals:e.decimals,name:e.name,value:e.id,label:e.name}})),f(d),j=d.filter((function(e){return ke===e.id}))[0],I(j||d[0]),j=d.filter((function(e){return Ne===e.id}))[0],P(j||d[1]),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),console.log("get all tokens",e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}function ye(){return _e.apply(this,arguments)}function _e(){return(_e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.client.api.provider.getProvider();case 3:return e.next=5,p.client.api.network.getNetwork();case 5:if(!(t=e.sent)||t.type===k){e.next=9;break}return Oe.error("Please connect to the ".concat(k,"-Net")),e.abrupt("return");case 9:return e.next=11,p.client.api.asset.getAccount();case 11:n=e.sent,i(n),localStorage.setItem("account",n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),"NO_PROVIDER"===e.t0&&Oe.error("Please install wallet extension first");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function Se(){return(Se=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return Oe.show("Please Connect Wallet First"),e.abrupt("return");case 3:if(!C.id){e.next=24;break}if(C.id!==T.id){e.next=7;break}return Oe.error("Please select different token"),e.abrupt("return");case 7:if(!($<=0)){e.next=10;break}return Oe.error("Price should be greater than 0"),e.abrupt("return");case 10:if(!(X<=0)){e.next=13;break}return Oe.error("Amount should be greater than 0"),e.abrupt("return");case 13:return e.prev=13,t=[{type:"Address",value:n},{type:"Long",value:C.id},{type:"Long",value:T.id},{type:"Long",value:new v.a($).times(g).integerValue(v.a.ROUND_DOWN).toString()},{type:"Long",value:new v.a(X).times(new v.a(Math.pow(10,C.decimals))).integerValue(v.a.ROUND_DOWN).toString()}],e.next=17,p.client.api.smartContract.invokeWasm({scriptHash:N,operation:"make",args:t,gasPrice:2500,gasLimit:3e6,requireIdentity:!1});case 17:(a=e.sent).transaction&&de({show:!0,type:"success",text:"Transaction Successfull",extraText:"Hash: ".concat(a.transaction)}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(13),de({show:!0,type:"error",text:"Transaction Failed",extraText:"".concat(e.t0)});case 24:case"end":return e.stop()}}),e,null,[[13,21]])})))).apply(this,arguments)}function Ce(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!t){e.next=9;break}return e.prev=1,e.next=4,p.client.api.smartContract.invokeWasm({scriptHash:N,operation:"unmake",args:[{type:"Address",value:n},{type:"Long",value:t}],gasPrice:2500,gasLimit:3e6,requireIdentity:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("onunmake",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Le(e){if(C.id){var t="my"===B?F:R;return"sell"===e?t.filter((function(e){return e.asset_token_id===C.id&&e.price_token_id===T.id})).map((function(e){return Object(c.jsxs)("div",{className:"my-make-item reverse",children:[Object(c.jsx)("div",{className:"make-item-detail make-sell",children:e.price/g}),Object(c.jsx)("div",{className:"make-item-detail",children:new v.a(e.amount).div(Math.pow(10,C.decimals)).toString()}),"my"===B&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return Ce(e.make_id)},children:"Cancel"})]},e.make_id)})):t.filter((function(e){return e.asset_token_id===T.id&&e.price_token_id===C.id})).map((function(e){return Object(c.jsxs)("div",{className:"my-make-item",children:[Object(c.jsx)("div",{className:"make-item-detail make-buy",children:g/e.price}),Object(c.jsx)("div",{className:"make-item-detail",children:new v.a(e.amount).times(e.price).div(g).div(Math.pow(10,T.decimals)).toString()}),"my"===B&&Object(c.jsx)("div",{className:"unmake-btn",onClick:function(){return Ce(e.make_id)},children:"Cancel"})]},e.make_id)}))}return null}function Ue(e){if(m.length){var t="asset"===e?Te:Pe,n={};return n="asset"===e?m.filter((function(e){return ke===e.id}))[0]||m[0]:m.filter((function(e){return Ne===e.id}))[0]||m[1],Object(c.jsx)(h.a,{className:"token-select",defaultValue:n,options:m,isSearchable:!1,components:{Option:function(e){return Object(c.jsx)(b.f.Option,Object(a.a)(Object(a.a)({},e),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"option-icon-".concat(e.label," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:e.label})]})}))},SingleValue:function(e){var t=e.children,n=Object(l.a)(e,["children"]);return Object(c.jsx)(b.f.SingleValue,Object(a.a)(Object(a.a)({},n),{},{children:Object(c.jsxs)("div",{className:"option-wrapper",children:[Object(c.jsx)("div",{className:"option-icon-".concat(t," option-icon")}),Object(c.jsx)("div",{className:"option-label",children:t})]})}))}},onChange:function(e){return t(e)},theme:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderRadius:0,colors:Object(a.a)(Object(a.a)({},e.colors),{},{primary:"#2c2c2c"})})}})}}function Te(e){e.value!==C.id&&I(m.filter((function(t){return t.id===e.value}))[0])}function Pe(e){e.value!==T.id&&P(m.filter((function(t){return t.id===e.value}))[0])}function We(e){be(e)}return Object(r.useEffect)((function(){ge();var e=setInterval((function(){m.length?clearInterval(e):ge()}),5e3);return function(){return clearInterval(e)}}),[m]),Object(r.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(d.a)(u.a.mark((function e(){var t,n,a,c,r,i,s,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C.id){e.next=19;break}if(C.id!==T.id){e.next=4;break}return A([]),e.abrupt("return");case 4:return e.prev=4,e.next=7,p.client.api.smartContract.invokeWasmRead({scriptHash:N,operation:"get_makes_of_pair",args:[{type:"Long",value:C.id},{type:"Long",value:T.id}]});case 7:for(t=e.sent,n=[],a=new w(t),c=C.id<T.id?C.id:T.id,r=C.id<T.id?T.id:C.id,i=0;i<=1;i++)for(s=a.readNextLen(),l=0;l<s;l++)(o={}).make_id=a.readUint128(),o.price=a.readUint128(),o.amount=new v.a(a.readUint128()).toString(),o.asset_token_id=0===i?c:r,o.price_token_id=0===i?r:c,n.push(o);A(n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log("get makes of pair",e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}e();var n=setInterval((function(){e()}),2e3);return function(){return clearInterval(n)}}),[C,T,n]),Object(r.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(d.a)(u.a.mark((function e(){var t,a,c,r,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}return e.prev=1,e.next=4,p.client.api.smartContract.invokeWasmRead({scriptHash:N,operation:"get_user_makes",args:[{type:"Address",value:n}]});case 4:for(t=e.sent,a=[],c=new w(t),r=c.readNextLen(),i=0;i<r;i++)(s={}).address=p.client.api.utils.hexToAddress(c.read(20)),s.asset_token_id=c.readUint128(),s.price_token_id=c.readUint128(),s.price=c.readUint128(),s.amount=c.readUint128(),s.make_id=c.readUint128(),a.push(s);H(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("get user makes",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}e();var a=setInterval(e,5e3);return function(){return clearInterval(a)}}),[C,T,n]),Object(r.useEffect)((function(){function e(){return t.apply(this,arguments)}function t(){return(t=Object(d.a)(u.a.mark((function e(){var t,n,a,c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.length){e.next=17;break}return e.prev=1,e.next=4,p.client.api.smartContract.invokeWasmRead({scriptHash:N,operation:"stat",args:[]});case 4:for(t=e.sent,n=[],(a=new w(t)).readUint128(),c=a.readNextLen(),r=function(e){var t={};t.id=a.readUint128();var c=m.filter((function(e){return e.id===t.id}))[0];t.balance=new v.a(a.readUint128()).div(new v.a(Math.pow(10,c.decimals))).toString(),t.name=c.name,n.push(t)},i=0;i<c;i++)r();se(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("get stat",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}e();var n=setInterval(e,5e3);return function(){return clearInterval(n)}}),[m]),Object(r.useEffect)((function(){ae(($||0)*(X||0))}),[$,X]),Object(r.useEffect)((function(){G("all")}),[n]),Object(c.jsxs)("div",{className:"app",children:[null===n&&Object(c.jsx)("div",{className:"connect-wallet-overlay",children:Object(c.jsxs)("div",{className:"connect-wrapper",children:[Object(c.jsx)("p",{className:"connect-title",children:"Connect Wallet"}),Object(c.jsx)("div",{className:"wallet-item",onClick:function(){return ye()},children:"Cyano Wallet"})]})}),ue.show?Object(c.jsx)("div",{className:"info-modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){de(Object(a.a)(Object(a.a)({},ue),{},{show:!1}))}}),Object(c.jsx)("div",{className:"modal-icon-".concat(ue.type," modal-icon")}),Object(c.jsx)("div",{className:"modal-text-".concat(ue.type," modal-text"),children:ue.text}),Object(c.jsx)("div",{className:"modal-extra-text",children:ue.extraText})]})}):null,me?Object(c.jsx)("div",{className:"info-modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"close-btn",onClick:function(){return We(!1)}}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex is a pure github based DAO dex, all activities are logged on github."}),Object(c.jsxs)("p",{className:"intro-line",children:["You can open issues for discussion ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/uniq-ex/uniq-ex/issues",children:"here"})]}),Object(c.jsx)("p",{className:"intro-line",children:"uniq-ex's future business will not be limited to exchanges though, we may enter various DeFi markets like compound or hegic."}),Object(c.jsxs)("p",{className:"intro-line",children:["We're open to crowdfunding, you can buy our governance token ",Object(c.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://uniq-ex.github.io?asset=1&price=2",children:"here"})]})]})}):null,ve?Object(c.jsx)("div",{className:"info-modal-overlay",children:Object(c.jsxs)("div",{className:"modal-wrapper",children:[Object(c.jsx)("div",{className:"modal-icon-loading modal-icon"}),Object(c.jsx)("div",{className:"modal-text",children:"Loading Tokens"})]})}):null,Object(c.jsx)("div",{className:"header",children:Object(c.jsxs)("div",{className:"content-wrapper",children:[Object(c.jsx)("div",{className:"logo-wrapper",children:Object(c.jsx)("div",{className:"site-intro",onClick:function(){return We(!0)}})}),Object(c.jsxs)("div",{className:"profile-wrapper",children:[n&&Object(c.jsx)("span",{className:"account-address",children:n}),n&&Object(c.jsx)("span",{className:"signout-btn",onClick:function(){return i(""),void localStorage.setItem("account","")},children:"Sign Out"}),""===n&&Object(c.jsx)("span",{className:"connect-btn",onClick:function(){return ye()},children:"Connect Wallet"})]})]})}),Object(c.jsxs)("div",{className:"trade-container",children:[Object(c.jsxs)("div",{className:"make-wrapper",children:[Object(c.jsx)("div",{className:"container-header",children:"Trade"}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsx)("div",{className:"item-title",children:"Amount"}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Ue("asset"),Object(c.jsx)("input",{className:"input inline-input",placeholder:"Amount",type:"number",onChange:function(e){return Z(e.target.value)}})]})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsxs)("div",{className:"item-title",children:["Price",Object(c.jsx)("span",{className:"hint",children:function(){if(C.id)return"1 ".concat(C.name," = ").concat($||"?"," ").concat(T.name)}()})]}),Object(c.jsx)("div",{className:"input-wrapper",children:Object(c.jsx)("input",{className:"input",placeholder:"Price",type:"number",onChange:function(e){return z(e.target.value)}})})]}),Object(c.jsxs)("div",{className:"form-item",children:[Object(c.jsx)("div",{className:"item-title",children:"Will Get"}),Object(c.jsxs)("div",{className:"input-wrapper",children:[Ue("price"),Object(c.jsx)("input",{className:"input inline-input",disabled:!0,type:"number",value:ne})]})]}),Object(c.jsx)("div",{className:"make-btn",onClick:function(){return function(){return Se.apply(this,arguments)}()},children:"Sell"})]}),Object(c.jsxs)("div",{className:"trade-panel",children:[Object(c.jsxs)("div",{className:"panel-header",children:[Object(c.jsx)("div",{className:"panel-title",children:"Order Book"}),Object(c.jsxs)("div",{className:"tabs",children:[Object(c.jsx)("div",{className:"all"===B?"tab-wrapper selected":"tab-wrapper",onClick:function(){return G("all")},children:"All"}),Object(c.jsx)("div",{className:"my"===B?"tab-wrapper selected":"tab-wrapper",onClick:function(){n?G("my"):Oe.show("Please Connect Wallet First")},children:"My"})]})]}),Object(c.jsxs)("div",{className:"list-title",children:[Object(c.jsx)("div",{className:"blank-placeholder"}),Object(c.jsxs)("div",{className:"title-items",children:[Object(c.jsxs)("div",{className:"item-text",children:["Price (",function(){if(C.id&&T.id)return"".concat(C.name,"/").concat(T.name)}(),")"]}),Object(c.jsxs)("div",{className:"item-text",children:["Amount (",function(){if(C.id)return C.name}(),")"]}),"my"===B&&Object(c.jsx)("div",{className:"item-placeholder"})]})]}),Object(c.jsxs)("div",{className:"sell-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Sell"}),Object(c.jsx)("div",{className:"make-list reverse",children:Le("sell")})]}),Object(c.jsxs)("div",{className:"buy-section",children:[Object(c.jsx)("div",{className:"section-title",children:"Buy"}),Object(c.jsx)("div",{className:"make-list",children:Le("buy")})]})]})]}),Object(c.jsxs)("div",{className:"token-pool",children:[Object(c.jsx)("div",{className:"container-header",children:"Token Balance"}),function(){if(ie.length)return ie.map((function(e){return Object(c.jsxs)("div",{className:"pool-item",children:[Object(c.jsx)("div",{className:"token-name",children:e.name}),Object(c.jsx)("div",{className:"token-balance",children:e.balance})]},e.name)}))}()]})]})},S=n(269),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,581)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};p.client.registerClient({});var I={timeout:5e3,position:x.b.TOP_RIGHT};s.a.render(Object(c.jsx)(x.a,Object(a.a)(Object(a.a)({template:S.a},I),{},{children:Object(c.jsx)(_,{})})),document.getElementById("root")),C()}},[[578,1,2]]]);
//# sourceMappingURL=main.52f01aea.chunk.js.map